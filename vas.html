<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VAS</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen font-sans">

<header class="bg-white shadow p-4 font-bold text-xl sticky top-0 z-50 text-center">
    VAS
</header>

<main class="max-w-6xl mx-auto p-4">

<input id="search" placeholder="Cari data..."
class="w-full mb-4 p-3 rounded-xl shadow focus:outline-none focus:ring-2 focus:ring-gray-400"/>

<!-- TECPROTEC -->
<h2 class="font-bold text-lg mb-2">TECPROTEC</h2>
<div class="hidden md:block bg-white rounded-xl mb-6 overflow-hidden">
<table class="w-full text-sm border">
<thead class="bg-gray-800 text-white">
<tr>
<th class="border p-2">Nama</th>
<th class="border p-2">Target</th>
<th class="border p-2">Qty</th>
<th class="border p-2">Value</th>
<th class="border p-2">Target/Day</th>
<th class="border p-2">AR</th>
</tr>
</thead>
<tbody id="tecTable"></tbody>
</table>
</div>
<div id="tecMobile" class="md:hidden grid gap-4 mb-6"></div>

<!-- INDOSAT -->
<h2 class="font-bold text-lg mb-2 text-yellow-500">INDOSAT</h2>
<div class="hidden md:block bg-white rounded-xl mb-6 overflow-hidden">
<table class="w-full text-sm border">
<thead class="bg-yellow-400 text-white">
<tr>
<th class="border p-2">Nama</th>
<th class="border p-2">Target</th>
<th class="border p-2">Qty</th>
<th class="border p-2">Value</th>
<th class="border p-2">Target/Day</th>
<th class="border p-2">AR</th>
</tr>
</thead>
<tbody id="indosatTable"></tbody>
</table>
</div>
<div id="indosatMobile" class="md:hidden grid gap-4 mb-6"></div>

<!-- TELKOMSEL -->
<h2 class="font-bold text-lg mb-2 text-red-600">TELKOMSEL</h2>
<div class="hidden md:block bg-white rounded-xl overflow-hidden">
<table class="w-full text-sm border">
<thead class="bg-red-600 text-white">
<tr>
<th class="border p-2">Nama</th>
<th class="border p-2">Target</th>
<th class="border p-2">Qty</th>
<th class="border p-2">Value</th>
<th class="border p-2">Target/Day</th>
<th class="border p-2">%</th>
</tr>
</thead>
<tbody id="telkomselTable"></tbody>
</table>
</div>
<div id="telkomselMobile" class="md:hidden grid gap-4"></div>

</main>

<!-- BUTTON -->
<div class="flex justify-center my-6">
<button onclick="goBack()"
class="px-8 py-3 rounded-full bg-gray-900 text-white font-semibold
hover:scale-105 active:scale-95 transition shadow-lg">
‚Üê Kembali
</button>
</div>

<footer class="text-center text-sm text-gray-600 mb-4">
&copy; M Faisal Sadli 2026
</footer>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/1xqkaqEYBEn_j6Mm_cf2u-2kmLpw9x71yALhdC-pFkO8/export?format=tsv";

const tecTable = document.getElementById("tecTable");
const indosatTable = document.getElementById("indosatTable");
const telkomselTable = document.getElementById("telkomselTable");
const tecMobile = document.getElementById("tecMobile");
const indosatMobile = document.getElementById("indosatMobile");
const telkomselMobile = document.getElementById("telkomselMobile");

let currentGroup = "";

fetch(CSV_URL)
.then(res => res.text())
.then(text => {
const lines = text.split("\n").map(l => l.trim()).filter(Boolean);

lines.forEach(line => {
const cols = line.split("\t");

if (cols[0].toUpperCase() === "TECPROTEC") { currentGroup = "TECPROTEC"; return; }
if (cols[0].toUpperCase() === "INDOSAT") { currentGroup = "INDOSAT"; return; }
if (cols[0].toUpperCase() === "TELKOMSEL") { currentGroup = "TELKOMSEL"; return; }
if (cols[0] === "TARGET" || cols.length < 6) return;

const item = {
name: cols[0],
target: cols[1],
qty: cols[2],
value: cols[3],
targetDay: cols[4],
ar: cols[5]
};

if (currentGroup === "TECPROTEC") {
renderRow(item, tecTable);
renderCard(item, tecMobile, "gray");
}
if (currentGroup === "INDOSAT") {
renderRow(item, indosatTable);
renderCard(item, indosatMobile, "yellow");
}
if (currentGroup === "TELKOMSEL") {
renderRow(item, telkomselTable);
renderCard(item, telkomselMobile, "red");
}
});
});

function renderRow(d, table) {
table.innerHTML += `
<tr>
<td class="border p-2">${d.name}</td>
<td class="border p-2 text-right">${d.target}</td>
<td class="border p-2 text-center">${d.qty}</td>
<td class="border p-2 text-right">${d.value}</td>
<td class="border p-2 text-right">${d.targetDay}</td>
<td class="border p-2 text-center">${d.ar}</td>
</tr>`;
}

/* üî• MOBILE CARD MODERN */
function renderCard(d, container, color) {
container.innerHTML += `
<div class="group bg-white rounded-2xl p-4 shadow-md
hover:shadow-xl hover:-translate-y-1 transition-all duration-300
border-l-4 border-${color}-500">

<div class="flex justify-between items-center mb-2">
<span class="font-bold text-lg">${d.name}</span>
<span class="text-xs px-3 py-1 rounded-full bg-${color}-100 text-${color}-700 font-semibold">
AR ${d.ar}
</span>
</div>

<div class="grid grid-cols-2 gap-3 text-sm">
<div>
<p class="text-gray-500">Target</p>
<p class="font-semibold">${d.target}</p>
</div>
<div>
<p class="text-gray-500">Qty</p>
<p class="font-semibold">${d.qty}</p>
</div>
<div>
<p class="text-gray-500">Value</p>
<p class="font-semibold">${d.value}</p>
</div>
<div>
<p class="text-gray-500">Target/Day</p>
<p class="font-semibold">${d.targetDay}</p>
</div>
</div>

<div class="mt-3 text-right text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition">
Tap untuk detail
</div>

</div>`;
}

document.getElementById("search").addEventListener("input", function () {
const keyword = this.value.toLowerCase();
document.querySelectorAll("tbody tr, .group").forEach(el => {
el.style.display = el.innerText.toLowerCase().includes(keyword) ? "" : "none";
});
});

function goBack(){
window.location.href="index.html";
}
</script>

</body>
</html>
